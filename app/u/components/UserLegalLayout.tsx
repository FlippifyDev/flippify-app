import React, { Suspense } from 'react';
import Navbar from './Navbar';
import Loading from '../../components/Loading';
import Sidebar from './Sidebar';

const UserLayout = ({ children }: { children: React.ReactNode }) => {
  const svg = `<svg id="visual" viewBox="0 0 900 600" width="900" height="600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"><rect x="0" y="0" width="900" height="600" fill="#1B2A49"></rect><path d="M0 449L10 440.5C20 432 40 415 60 409.8C80 404.7 100 411.3 120 413.7C140 416 160 414 180 419.5C200 425 220 438 240 444.2C260 450.3 280 449.7 300 449.5C320 449.3 340 449.7 360 438.8C380 428 400 406 420 404C440 402 460 420 480 426.5C500 433 520 428 540 422.2C560 416.3 580 409.7 600 408.8C620 408 640 413 660 411.2C680 409.3 700 400.7 720 394.5C740 388.3 760 384.7 780 389.5C800 394.3 820 407.7 840 410.3C860 413 880 405 890 401L900 397L900 601L890 601C880 601 860 601 840 601C820 601 800 601 780 601C760 601 740 601 720 601C700 601 680 601 660 601C640 601 620 601 600 601C580 601 560 601 540 601C520 601 500 601 480 601C460 601 440 601 420 601C400 601 380 601 360 601C340 601 320 601 300 601C280 601 260 601 240 601C220 601 200 601 180 601C160 601 140 601 120 601C100 601 80 601 60 601C40 601 20 601 10 601L0 601Z" fill="#3e78b2"></path><path d="M0 410L10 411.3C20 412.7 40 415.3 60 425.3C80 435.3 100 452.7 120 463.2C140 473.7 160 477.3 180 472.5C200 467.7 220 454.3 240 451.7C260 449 280 457 300 453.5C320 450 340 435 360 430.3C380 425.7 400 431.3 420 440.5C440 449.7 460 462.3 480 461.2C500 460 520 445 540 436.8C560 428.7 580 427.3 600 429.3C620 431.3 640 436.7 660 438.3C680 440 700 438 720 438.5C740 439 760 442 780 443.5C800 445 820 445 840 444.5C860 444 880 443 890 442.5L900 442L900 601L890 601C880 601 860 601 840 601C820 601 800 601 780 601C760 601 740 601 720 601C700 601 680 601 660 601C640 601 620 601 600 601C580 601 560 601 540 601C520 601 500 601 480 601C460 601 440 601 420 601C400 601 380 601 360 601C340 601 320 601 300 601C280 601 260 601 240 601C220 601 200 601 180 601C160 601 140 601 120 601C100 601 80 601 60 601C40 601 20 601 10 601L0 601Z" fill="#406395"></path><path d="M0 493L10 486.3C20 479.7 40 466.3 60 463.5C80 460.7 100 468.3 120 470.2C140 472 160 468 180 471.7C200 475.3 220 486.7 240 490.5C260 494.3 280 490.7 300 492.5C320 494.3 340 501.7 360 503.3C380 505 400 501 420 496.7C440 492.3 460 487.7 480 481.7C500 475.7 520 468.3 540 466.7C560 465 580 469 600 473C620 477 640 481 660 483.7C680 486.3 700 487.7 720 481.3C740 475 760 461 780 455C800 449 820 451 840 452C860 453 880 453 890 453L900 453L900 601L890 601C880 601 860 601 840 601C820 601 800 601 780 601C760 601 740 601 720 601C700 601 680 601 660 601C640 601 620 601 600 601C580 601 560 601 540 601C520 601 500 601 480 601C460 601 440 601 420 601C400 601 380 601 360 601C340 601 320 601 300 601C280 601 260 601 240 601C220 601 200 601 180 601C160 601 140 601 120 601C100 601 80 601 60 601C40 601 20 601 10 601L0 601Z" fill="#3d5078"></path><path d="M0 509L10 505.5C20 502 40 495 60 497.8C80 500.7 100 513.3 120 521.5C140 529.7 160 533.3 180 529.2C200 525 220 513 240 505.5C260 498 280 495 300 493.7C320 492.3 340 492.7 360 492.2C380 491.7 400 490.3 420 494C440 497.7 460 506.3 480 510.7C500 515 520 515 540 515.3C560 515.7 580 516.3 600 512C620 507.7 640 498.3 660 498.5C680 498.7 700 508.3 720 511.3C740 514.3 760 510.7 780 507C800 503.3 820 499.7 840 501.5C860 503.3 880 510.7 890 514.3L900 518L900 601L890 601C880 601 860 601 840 601C820 601 800 601 780 601C760 601 740 601 720 601C700 601 680 601 660 601C640 601 620 601 600 601C580 601 560 601 540 601C520 601 500 601 480 601C460 601 440 601 420 601C400 601 380 601 360 601C340 601 320 601 300 601C280 601 260 601 240 601C220 601 200 601 180 601C160 601 140 601 120 601C100 601 80 601 60 601C40 601 20 601 10 601L0 601Z" fill="#353e5c"></path><path d="M0 549L10 551.2C20 553.3 40 557.7 60 560.3C80 563 100 564 120 563.5C140 563 160 561 180 557.2C200 553.3 220 547.7 240 545.2C260 542.7 280 543.3 300 543.3C320 543.3 340 542.7 360 546C380 549.3 400 556.7 420 556.7C440 556.7 460 549.3 480 544.2C500 539 520 536 540 538.2C560 540.3 580 547.7 600 550.2C620 552.7 640 550.3 660 546.3C680 542.3 700 536.7 720 538.2C740 539.7 760 548.3 780 551.2C800 554 820 551 840 546.7C860 542.3 880 536.7 890 533.8L900 531L900 601L890 601C880 601 860 601 840 601C820 601 800 601 780 601C760 601 740 601 720 601C700 601 680 601 660 601C640 601 620 601 600 601C580 601 560 601 540 601C520 601 500 601 480 601C460 601 440 601 420 601C400 601 380 601 360 601C340 601 320 601 300 601C280 601 260 601 240 601C220 601 200 601 180 601C160 601 140 601 120 601C100 601 80 601 60 601C40 601 20 601 10 601L0 601Z" fill="#2b2d42"></path></svg>`;
  const base64SVG = `data:image/svg+xml;base64,${Buffer.from(svg).toString('base64')}`;

  return (
    <Suspense fallback={<Loading />}>
    <div
      className="min-h-screen bg-cover bg-center bg-fixed overflow-x-hidden"
      style={{ backgroundImage: `url('${base64SVG}')` }}
    >
      <div className="flex flex-col min-h-screen">
        {/* Sidebar */}
        <div className='fixed top-0 left-0 h-screen z-10'>
          <Sidebar />
        </div>

        {/* Main content area */}
        <div className="flex flex-col xl:ml-80 w-full">
          {/* Navbar */}
          <div className="fixed top-0 right-0">
            <Navbar />
          </div>

          {/* Page content */}
          <div className="scroll-smooth mt-16 p-4 xl:mr-80 flex justify-start">
            {children}
          </div>

        </div>
      </div>
    </div>
  </Suspense>
  );
};

export default UserLayout;